<!doctype html>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="/fonts.css">
<link rel="stylesheet" type="text/css" href="/app.css">
<!-- <script src="debug/elm-remotedev.js"></script> -->
<script src="/app.js"></script>

<body>
  <script>
    var app = Elm.Main.init({
      flags: {
        "navigatorLanguageTag": navigator.language,
        "userSelectedUILanguageTag": localStorage.getItem("selectedUILanguage")
      }
    });
    app.ports.saveSelectedUILanguageTag.subscribe(
      function (userSelectedUILanguageTag) {
        localStorage.setItem("selectedUILanguage", userSelectedUILanguageTag);
      });
    window.addEventListener('storage', function (ev) {
      console.log("StorageEvent: %s %o", ev.newValue, ev);
      if (ev.key == "selectedUILanguage") {
        app.ports.changedSelectedUILanguageTag.send(ev.newValue);
      }
    });
  </script>
</body>